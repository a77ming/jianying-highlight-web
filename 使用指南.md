# 🎬 AI高光剪辑工具 - 快速使用指南

## 🚀 启动项目

项目已经创建完成，开发服务器正在运行中！

**访问地址**: http://localhost:3000

## 📝 完整使用流程

### 步骤1: 上传字幕文件（首页）

1. 打开浏览器访问 http://localhost:3000
2. 点击"选择文件"上传SRT字幕文件
3. （可选）在"短剧简介"框中输入剧情介绍，帮助AI更好地理解内容
4. 输入你的OpenAI API密钥（格式：sk-xxxxx）
5. 点击"🚀 开始分析"按钮

### 步骤2: 预览AI分析结果

AI分析完成后会跳转到预览页面，显示：

- **统计信息**：总字幕数、总时长
- **识别的片段列表**：每个片段包含：
  - 标题和钩子字幕
  - 时间范围
  - 混剪顺序
  - 画面定位描述
  - 字幕方案
  - 混剪思路
  - 选择原因

**操作**：
- ✓ 勾选你想要的片段
- ✗ 取消不需要的片段
- 点击"📥 下载剪辑执行表"可以下载详细文档
- 点击"✅ 确认并继续"进入下一步

### 步骤3: 处理视频

1. 在处理页面上传对应的视频文件（MP4等格式）
2. 系统会自动：
   - 裁剪你选择的片段
   - 合并成高光合集视频
   - 生成剪辑执行表
3. 处理完成后可以下载：
   - 🎬 高光合集视频（所有片段合并）
   - 📋 Reel剪辑执行表（详细文档）
   - 📁 单个素材片段

## 💡 使用示例

你可以使用项目自带的示例文件测试：

```
/Users/ming/工作/剪映字幕工程nextjs版本/例子/Vampire's Remedy-第1集.srt
/Users/ming/工作/剪映字幕工程nextjs版本/例子/Vampire's Remedy-第1集.mp4
```

## ⚙️ 自定义配置

### 修改识别参数

编辑 `app/api/analyze/route.ts` 文件：

```typescript
const reelScripts = await aiAnalyzer.analyzeHighlights(
  subtitles,
  synopsis || '',
  5,  // ← 修改这里：最大片段数
  8,  // ← 修改这里：最小时长（秒）
  15  // ← 修改这里：最大时长（秒）
);
```

### 使用其他AI模型

编辑 `lib/ai-analyzer.ts`：

```typescript
constructor(apiKey: string, baseURL: string = 'https://yunwu.ai/v1', model: string = 'gpt-4o')
```

## 🔧 开发命令

```bash
# 启动开发服务器
npm run dev

# 构建生产版本
npm run build

# 启动生产服务器
npm start

# 代码检查
npm run lint
```

## 📦 输出文件位置

所有处理后的文件保存在：
```
public/output/[时间戳]/
├── 素材片段/
│   ├── 片段1.mp4
│   ├── 片段2.mp4
│   └── ...
├── 视频名称_高光合集.mp4
└── 视频名称_Reel剪辑执行表.txt
```

## ⚠️ 注意事项

1. **FFmpeg必须安装**：系统需要安装FFmpeg才能处理视频
2. **API密钥安全**：密钥不会被保存，仅在当前会话使用
3. **大文件处理**：大视频文件处理时间较长，请耐心等待
4. **浏览器兼容**：推荐使用Chrome、Edge等现代浏览器

## 🐛 常见问题

**Q: 点击开始分析后没有反应？**
A: 检查浏览器控制台（F12）查看错误信息

**Q: FFmpeg错误？**
A: 运行 `ffmpeg -version` 确认已安装

**Q: API调用失败？**
A: 检查API密钥是否正确，确保有足够的额度

**Q: 下载的文件打不开？**
A: 检查 `public/output/` 目录权限

## 🎯 项目特色

✅ **完全本地化**：所有处理在本地完成，保护隐私
✅ **AI驱动**：使用GPT-4o智能识别精彩片段
✅ **预览机制**：可以先预览再确认，避免浪费处理时间
✅ **批量处理**：一次处理多个片段，自动合并
✅ **详细文档**：生成专业的剪辑执行表

## 📞 技术支持

如遇到问题，请检查：
1. Node.js版本（需要18+）
2. FFmpeg是否正确安装
3. 浏览器控制台错误信息
4. 服务器终端日志

---

**祝使用愉快！** 🎉
